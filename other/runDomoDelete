package com.compay;

import java.io.*;

/**
 * Created by aynedelgado on 8/14/15.
 */
public class Main {
    public static void main(String[] args){
        String designId = null;
        try{
        designId = promptForDesignId();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        writeDesignIdsToFile(designId);
        System.out.println("Your design has been read in");
        executeScript();
    }

    public static  String promptForDesignId() throws IOException{
        String designId =" ";
        System.out.println("Please enter your design ID: ");
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        designId = br.readLine();
        return designId;
    }
    //writes design Ids to a file
    public static void writeDesignIdsToFile(String designId){
        try{
            PrintWriter writer = new PrintWriter("designIds.txt", "UTF-8");
            writer.println(designId);
            writer.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
    public static void executeScript(){
        try{

            ProcessBuilder pb = null;
            Process p;
            String myScripts = "/scripts";
            String workingDir = System .getProperty("user.dir");
            System.out.println(""+workingDir);
            String myFile = workingDir + "/designIds.txt";
            String scriptLoc = workingDir + myScripts + "/deleteDesignId.sh";
            System.out.println(scriptLoc);
            System.out.println(myFile);
            String cmd [] = {"/bin/bash", scriptLoc, myFile};
            pb = new ProcessBuilder(cmd);
            pb.directory(new File(workingDir));
            p=pb.start();
            p.waitFor();
            BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));

            String line = " ";
            while((line=reader.readLine())!=null){
                System.out.print(line + "\n");
            }
            reader.close();

            System.out.println("\nFinished execution...");




        }
        catch (Exception e){
            e.printStackTrace();
        }
    }

}

